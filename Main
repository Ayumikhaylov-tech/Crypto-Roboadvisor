import json
import numpy as np
from sentence_transformers import SentenceTransformer
from sklearn.metrics.pairwise import cosine_similarity
import faiss
import os
from datetime import datetime

class CryptoKnowledgeBase:
    def __init__(self):
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
        self.model = SentenceTransformer('all-MiniLM-L6-v2')
        self.vector_index = None
        self.knowledge_base = []
        self.setup_base_knowledge()
    
    def setup_base_knowledge(self):
        """–ë–∞–∑–æ–≤–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø–æ –∫—Ä–∏–ø—Ç–æ–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º"""
        self.knowledge_base = [
            {
                "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è?",
                "answer": "–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è - —ç—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∞–∫—Ç–∏–≤–∞–º–∏ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —Ä–∏—Å–∫–æ–≤. –í –∫—Ä–∏–ø—Ç–æ–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è—Ö —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –≤–ª–æ–∂–µ–Ω–∏–µ –≤ Bitcoin, Ethereum, –∞–ª—å—Ç–∫–æ–π–Ω—ã –∏ —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω—ã –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ –æ–¥–Ω–æ–º –∞–∫—Ç–∏–≤–µ.",
                "category": "risk_management",
                "importance": "high"
            },
            {
                "question": "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è?",
                "answer": "–†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ - —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø–æ—Ä—Ç—Ñ–µ–ª—è –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é –∞–∫—Ç–∏–≤–æ–≤. –ö–æ–≥–¥–∞ –æ–¥–∏–Ω –∞–∫—Ç–∏–≤ —Å–∏–ª—å–Ω–æ –≤—ã—Ä–æ—Å –≤ —Ü–µ–Ω–µ, –µ–≥–æ –¥–æ–ª—è –≤ –ø–æ—Ä—Ç—Ñ–µ–ª–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è, —á—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫–∏. –†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–∞—Ç—å —á–∞—Å—Ç—å –ø–æ–¥–æ—Ä–æ–∂–∞–≤—à–∏—Ö –∞–∫—Ç–∏–≤–æ–≤ –∏ –∫—É–ø–∏—Ç—å –ø–æ–¥–µ—à–µ–≤–µ–≤—à–∏–µ, —Å–ª–µ–¥—É—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ '–ø–æ–∫—É–ø–∞–π –¥–µ—à–µ–≤–æ, –ø—Ä–æ–¥–∞–≤–∞–π –¥–æ—Ä–æ–≥–æ'.",
                "category": "portfolio_management", 
                "importance": "high"
            },
            {
                "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ MACD –∏ –∫–∞–∫ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?",
                "answer": "MACD (Moving Average Convergence Divergence) - —ç—Ç–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–∞. –í –Ω–∞—à–µ–º —Å–æ–≤–µ—Ç–Ω–∏–∫–µ: MACD 1H –¥–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫, MACD 4H –¥–ª—è —Å—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã—Ö, MACD 1D –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö. –°–∏–≥–Ω–∞–ª –ø–æ–∫—É–ø–∫–∏: –∫–æ–≥–¥–∞ MACD –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤—ã—à–µ -20 –∏ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç –Ω—É–ª–µ–≤—É—é –ª–∏–Ω–∏—é.",
                "category": "technical_analysis",
                "importance": "medium"
            },
            {
                "question": "–ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ —Ä–∏—Å–∫—É?",
                "answer": "–¢–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ —Ä–∏—Å–∫—É –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∞–Ω–∫–µ—Ç—É, —É—á–∏—Ç—ã–≤–∞—é—â—É—é: 1) –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø–æ—Ç–µ—Ä—è–º 2) –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ —Ü–µ–ª–∏ 3) –°—Ä–æ–∫ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ù–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–≥–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø—Ä–æ—Ñ–∏–ª—å: –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π, —É–º–µ—Ä–µ–Ω–Ω—ã–π –∏–ª–∏ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π.",
                "category": "risk_assessment",
                "importance": "high"
            },
            {
                "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ —Å—Ç–µ–π–±–ª–∫–æ–∏–Ω—ã –∏ –∑–∞—á–µ–º –æ–Ω–∏ –≤ –ø–æ—Ä—Ç—Ñ–µ–ª–µ?",
                "answer": "–°—Ç–µ–π–±–ª–∫–æ–∏–Ω—ã - —ç—Ç–æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º –∞–∫—Ç–∏–≤–∞–º (—á–∞—Å—Ç–æ USD). –í –ø–æ—Ä—Ç—Ñ–µ–ª–µ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ä–æ–ª—å '–±–µ–∑–æ–ø–∞—Å–Ω–æ–π –≥–∞–≤–∞–Ω–∏', —Å–Ω–∏–∂–∞—è –æ–±—â—É—é –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å –¥–ª—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏.",
                "category": "crypto_basics",
                "importance": "medium"
            }
        ]
        
        self.build_vector_index()
    
    def build_vector_index(self):
        """–°–æ–∑–¥–∞–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞"""
        texts = [item["question"] + " " + item["answer"] for item in self.knowledge_base]
        embeddings = self.model.encode(texts)
        
        # –°–æ–∑–¥–∞–Ω–∏–µ FAISS –∏–Ω–¥–µ–∫—Å–∞
        self.vector_index = faiss.IndexFlatIP(embeddings.shape[1])
        self.vector_index.add(embeddings.astype('float32'))
    
    def search_knowledge(self, query, top_k=3):
        """–ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π"""
        query_embedding = self.model.encode([query])
        scores, indices = self.vector_index.search(query_embedding.astype('float32'), top_k)
        
        results = []
        for score, idx in zip(scores[0], indices[0]):
            if idx < len(self.knowledge_base):
                results.append({
                    **self.knowledge_base[idx],
                    "relevance_score": float(score)
                })
        
        return sorted(results, key=lambda x: x["relevance_score"], reverse=True)

class CryptoAIAgent:
    def __init__(self):
        self.knowledge_base = CryptoKnowledgeBase()
        self.conversation_history = []
    
    def generate_response(self, user_query, user_context=None):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞"""
        
        # –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
        search_results = self.knowledge_base.search_knowledge(user_query)
        
        # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ—Ç–≤–µ—Ç–∞
        context = self._build_context(search_results, user_context)
        
        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
        response = self._craft_response(user_query, context, search_results)
        
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
        self.conversation_history.append({
            "timestamp": datetime.now().isoformat(),
            "query": user_query,
            "response": response,
            "context": user_context
        })
        
        return response
    
    def _build_context(self, search_results, user_context):
        """–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ –∏ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
        context = "–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π:\n"
        
        for i, result in enumerate(search_results[:2]):  # –ë–µ—Ä–µ–º 2 —Å–∞–º—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö
            context += f"{i+1}. {result['answer']}\n"
        
        if user_context:
            context += f"\n–ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {user_context}\n"
        
        return context
    
    def _craft_response(self, query, context, search_results):
        """–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞"""
        
        if not search_results:
            return "–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ –Ω–∞—à–µ–ª –ø–æ–¥—Ö–æ–¥—è—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É."
        
        best_match = search_results[0]
        
        # –ë–∞–∑–æ–≤—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        response = f"{best_match['answer']}"
        
        # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –µ—Å–ª–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –≤—ã—Å–æ–∫–∞—è
        if best_match['relevance_score'] > 0.5 and len(search_results) > 1:
            response += f"\n\n–¢–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ:\n"
            for result in search_results[1:3]:
                if result['relevance_score'] > 0.3:
                    response += f"‚Ä¢ {result['answer'][:100]}...\n"
        
        # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—É—á–∞—é—â–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
        response += self._add_educational_element(best_match['category'])
        
        return response
    
    def _add_educational_element(self, category):
        """–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
        educational_tips = {
            "risk_management": "\nüí° –°–æ–≤–µ—Ç: –î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è - –∫–ª—é—á –∫ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–º—É —É—Å–ø–µ—Ö—É!",
            "portfolio_management": "\nüí° –°–æ–≤–µ—Ç: –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é!",
            "technical_analysis": "\nüí° –°–æ–≤–µ—Ç: MACD –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏!",
            "risk_assessment": "\nüí° –°–æ–≤–µ—Ç: –†–µ–≥—É–ª—è—Ä–Ω–æ –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ —Å–≤–æ—é —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫ —Ä–∏—Å–∫—É!",
            "crypto_basics": "\nüí° –°–æ–≤–µ—Ç: –ò–∑—É—á–∞–π—Ç–µ –æ—Å–Ω–æ–≤—ã - —ç—Ç–æ –æ—Å–Ω–æ–≤–∞ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π!"
        }
        
        return educational_tips.get(category, "\nüí° –°–æ–≤–µ—Ç: –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —É—á–∏—Ç—å—Å—è - —ç—Ç–æ –∫–ª—é—á –∫ —É—Å–ø–µ—Ö—É –≤ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è—Ö!")
    
    def get_learning_path(self, user_level="beginner"):
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏ –æ–±—É—á–µ–Ω–∏—è"""
        paths = {
            "beginner": [
                "–û—Å–Ω–æ–≤—ã –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç –∏ –±–ª–æ–∫—á–µ–π–Ω–∞",
                "–ß—Ç–æ —Ç–∞–∫–æ–µ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏", 
                "–í–≤–µ–¥–µ–Ω–∏–µ –≤ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑",
                "–°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –ø–æ—Ä—Ç—Ñ–µ–ª—è"
            ],
            "intermediate": [
                "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏",
                "–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–æ—á–Ω—ã—Ö —Ç—Ä–µ–Ω–¥–æ–≤",
                "–†–∞–±–æ—Ç–∞ —Å DeFi –∏ —Å—Ç–µ–π–∫–∏–Ω–≥–æ–º",
                "–ù–∞–ª–æ–≥–æ–≤—ã–µ –∞—Å–ø–µ–∫—Ç—ã –∫—Ä–∏–ø—Ç–æ–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π"
            ],
            "advanced": [
                "–ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏–µ —Ç–æ—Ä–≥–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏",
                "–ü–æ—Ä—Ç—Ñ–µ–ª—å–Ω–∞—è —Ç–µ–æ—Ä–∏—è –ú–∞—Ä–∫–æ–≤–∏—Ü–∞",
                "–ê–Ω–∞–ª–∏–∑ on-chain –º–µ—Ç—Ä–∏–∫",
                "–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ö–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∏—Å–∫–æ–≤"
            ]
        }
        
        return paths.get(user_level, paths["beginner"])
    
    def save_conversation_history(self, filename="conversation_history.json"):
        """–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤"""
        with open(filename, 'w', encoding='utf-8') as f:
            json.dump(self.conversation_history, f, ensure_ascii=False, indent=2)

# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
def main():
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ò–ò-–∞–≥–µ–Ω—Ç–∞
    ai_agent = CryptoAIAgent()
    
    print("ü§ñ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Crypto Investment Assistant!")
    print("–ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –æ –∫—Ä–∏–ø—Ç–æ–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è—Ö, —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º\n")
    
    # –ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞
    test_queries = [
        "–ß—Ç–æ —Ç–∞–∫–æ–µ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è?",
        "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞?",
        "–û–±—ä—è—Å–Ω–∏ MACD –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏",
        "–ö–∞–∫ —Å–Ω–∏–∑–∏—Ç—å —Ä–∏—Å–∫–∏ –≤ –∫—Ä–∏–ø—Ç–æ–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è—Ö?"
    ]
    
    for query in test_queries:
        print(f"üë§ –í–æ–ø—Ä–æ—Å: {query}")
        response = ai_agent.generate_response(query)
        print(f"ü§ñ –û—Ç–≤–µ—Ç: {response}")
        print("-" * 80)
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—É—Ç–∏ –æ–±—É—á–µ–Ω–∏—è
    learning_path = ai_agent.get_learning_path("beginner")
    print("\nüéì –í–∞—à –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø—É—Ç—å –æ–±—É—á–µ–Ω–∏—è:")
    for i, topic in enumerate(learning_path, 1):
        print(f"{i}. {topic}")
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
    ai_agent.save_conversation_history()

if __name__ == "__main__":
    main()
